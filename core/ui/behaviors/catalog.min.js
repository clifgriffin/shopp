function ProductOptionsMenus(e,t){function a(){var e=new Array,a=s(c).val();h.not(c).each(function(){""!=s(this).val()&&e.push(s(this).val())}),s(c).empty(),u[h.index(c)].each(function(e,t){s(t).appendTo(s(c))}),s(c).val(a),s(c).children("option").each(function(){var a,l,o,d=!1,c=s(this),u={l:d,p:d,s:d,d:d,r:d,u:d},h=e.slice();""!=c.val()&&(this._label||(this._label=c.text()),u.l=this._label,h.push(c.val()),o=t.prices[i(h)]||t.prices[i(h,"deprecated")],o?(o.p&&t.pricetags&&(l=new Number(o.p),a=o.tax?new Number(l*t.taxrate):0,u.p=asMoney(new Number(l+a))),s.ua.msie&&c.css("color","#373737"),o.i&&o.s<1||"N/A"==o.t?(c.attr("selected")&&c.parent().attr("selectedIndex",0),t.disabled?n(c):c.remove()):c.removeAttr(f).show(),o.i&&(u.s=o.s,u.u=o.u),"N/A"!=o.t||t.disabled||c.remove(),c.text(r(t.format,u))):t.disabled?n(c):c.remove())})}function i(e,t){e instanceof Array||(e=[e]);for(var a=0,i=0,n=t?101:7001;i<e.length;i++)a^=e[i]*n;return a}function n(e){e.attr(f,!0),s.browser.msie&&e.css("color","#ccc")}function l(e){s(e).change(function(){var e,t=this;return t.options[t.selectedIndex].disabled?void(t.lastSelected?t.selectedIndex=t.lastSelected:(e=s(t).children("option:not(:disabled)").get(0),t.selectedIndex=e?e.index:0)):(t.lastSelected=t.selectedIndex,!0)})}function r(e,t){var a="([^ ]*)",i=function(e){return e.toString().replace(/[$]/g,"$$$$")};return s.each(t,function(n){if(t&&void 0!=t[n]){var l=new RegExp("("+a+"%"+n+a+")");label="$2"+i(t[n])+"$3",t[n]===!1&&(label=""),""===t[n]&&(label=""),e=e.replace(l,label)}}),e}var s=jQuery,o=0,d=!1,c=!1,u=new Array,h=s(e),f="disabled",p={disabled:!0,pricetags:!0,format:"%l (%p)",taxrate:0,prices:{}},t=s.extend(p,t);h.each(function(e,t){c=t,u[e]=s(t).children(),s.ua.msie&&l(t),e>0&&(d=h[e-1]),1==h.length?a():d&&s(d).change(function(){h.index(c)==h.length-1&&a(),0==this.selectedIndex&&""==this.options[0].value?s(t).attr(f,!0):s(t).removeAttr(f)}).change(),o++})}function catalogViewHandler(){var e=jQuery,t=e("#shopp"),a=new Date,i={list:"grid",grid:"list"};a.setTime(a.getTime()+2592e6),e.each(i,function(i,n){t.find("ul.views li button."+i).click(function(){t.removeClass(n).addClass(i),document.cookie="shopp_catalog_view="+i+"; expires="+a+"; path=/"}).hover(function(){e(this).toggleClass("hover")})})}function ShoppGallery(e,t,a){var i=jQuery,n=i(e),l=n.find("ul.previews"),r=n.find("ul.thumbnails li");t||(t="click"),a&&n.find("ul.thumbnails").css("width",a+"px"),r.bind(t,function(){var e,t=i("#"+i(this).attr("class").split(" ")[0]);t.hasClass("active")||(e=n.find("ul.previews li.active"),t.addClass("active").hide(),e.length&&e.fadeOut(800,function(){e.removeClass("active")}),t.appendTo(l).fadeIn(500))})}function ShoppSlideshow(e,t,a,i,n){var l,r=jQuery,s=this;s.element=r(e);var l={fade:[{display:"none"},{opacity:"show"}],"slide-down":[{display:"block",top:s.element.height()*-1},{top:0}],"slide-up":[{display:"block",top:s.element.height()},{top:0}],"slide-left":[{display:"block",left:s.element.width()*-1},{left:0}],"slide-right":[{display:"block",left:s.element.width()},{left:0}],wipe:[{display:"block",height:0},{height:s.element.height()}]},o=["normal","reverse","shuffle"];s.duration=t?t:800,s.delay=a?a:7e3,i=i?i:"fade",s.effect=l[i]?l[i]:l.fade,n=n?n:"normal",s.order=r.inArray(n,o)!=-1?n:"normal",s.slides=r(s.element).find("li:not(li.clear)").hide().css("visibility","visible"),s.total=s.slides.length,s.slide=0,s.shuffling=new Array,s.startTransition=function(){var e,t,a=r(s.slides[s.slide-1]).removeClass("active");switch(r(s.slides[s.slide]).css(s.effect[0]).appendTo(s.element).animate(s.effect[1],s.duration,function(){a.css(s.effect[0])}).addClass("active"),s.order){case"shuffle":0==s.shuffling.length&&(s.shuffleList(),e=r.inArray(s.slide,s.shuffling),e!=-1&&s.shuffling.splice(e,1)),t=Math.floor(Math.random()*s.shuffling.length),s.slide=s.shuffling[t],s.shuffling.splice(t,1);break;case"reverse":s.slide=s.slide-1<0?s.slides.length-1:s.slide-1;break;default:s.slide=s.slide+1==s.total?0:s.slide+1}1!=s.slides.length&&setTimeout(s.startTransition,s.delay)},s.transitionTo=function(e){s.slide=e,s.startTransition()},s.shuffleList=function(){for(var e=0;e<s.total;e++)s.shuffling.push(e)},s.startTransition()}function slideshows(){var e,t,a,i=jQuery;i("ul.slideshow").each(function(){e=i(this).attr("class"),t={},a={fx:new RegExp(/([\w_-]+?)\-fx/),order:new RegExp(/([\w_-]+?)\-order/),duration:new RegExp(/duration\-(\d+)/),delay:new RegExp(/delay\-(\d+)/)},i.each(a,function(a,i){(option=e.match(i))&&(t[a]=option[1])}),new ShoppSlideshow(this,t.duration,t.delay,t.fx,t.order)})}function ShoppCarousel(e,t){var a,i=jQuery,n=this,l=1,r=i(e),s=r.find("ul"),o=s.find("> li");n.duration=t?t:800,n.cframe=r.find("div.frame"),l=Math.round(n.cframe.innerWidth()/o.outerWidth()),l<1&&(l=1),a=Math.round(n.cframe.innerWidth()%o.outerWidth()/o.length/2),o.css("margin","0 "+a+"px"),n.pageWidth=(o.outerWidth()+2*a)*l,n.page=1,n.pages=Math.ceil(o.length/l),o.length%l!=0&&(s.append(new Array(l-o.length%l+1).join('<li class="empty" style="width: '+o.outerWidth()+"px; height: 1px; margin: 0 "+a+'px"/>')),o=s.find("> li")),o.filter(":first").before(o.slice(-l).clone().addClass("cloned")),o.filter(":last").after(o.slice(0,l).clone().addClass("cloned")),o=s.find("> li"),n.cframe.scrollLeft(n.pageWidth),n.scrollLeft=r.find("button.left"),n.scrollRight=r.find("button.right"),n.scrolltoPage=function(e){var t=e<n.page?-1:1,a=Math.abs(n.page-e),i=n.pageWidth*t*a;n.cframe.filter(":not(:animated)").animate({scrollLeft:"+="+i},n.duration,function(){0==e?(n.cframe.scrollLeft(n.pageWidth*n.pages),e=n.pages):e>n.pages&&(n.cframe.scrollLeft(n.pageWidth),e=1),n.page=e})},n.scrollLeft.click(function(){return n.scrolltoPage(n.page-1)}),n.scrollRight.click(function(){return n.scrolltoPage(n.page+1)})}function carousels(){var e,t,a,i=jQuery;i("div.carousel").each(function(){e=i(this).attr("class"),t={},a={duration:new RegExp(/duration\-(\d+)/)},i.each(a,function(a,i){(option=e.match(i))&&(t[a]=option[1])}),new ShoppCarousel(this,t.duration)})}function validate(e){if(!e)return!1;var t=jQuery,a=t(e),i=!0,n=[],l=[],r=t(e).find("input,select,textarea").not(":hidden"),s="required",o="title";return t.fn.reverse="undefined"==typeof[]._reverse?[].reverse:[]._reverse,t.each(r.reverse(),function(e,a){input=t(a).removeClass("error"),label=t("label[for="+input.attr("id")+"]").removeClass("error"),!0!==input.attr("disabled")&&"disabled"!=input.attr("disabled")&&(input.hasClass(s)&&""==input.val()&&(l=new Array($cv.field.replace(/%s/,input.attr(o)),a)),input.hasClass(s)&&"checkbox"==input.attr("type")&&!input.attr("checked")&&(l=new Array($cv.chkbox.replace(/%s/,input.attr(o)),a)),input.hasClass("email")&&!input.val().match(new RegExp(/^[-a-z0-9~!$%^&*_=+}{\'?]+(\.[-a-z0-9~!$%^&*_=+}{\'?]+)*@([a-z0-9_][-a-z0-9_]*(\.[-a-z0-9_]+)*\.([a-z][a-z0-9]+)|([0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}))(:[0-9]{1,5})?$/i))&&(l=new Array($cv.email,a)),input.attr("class")&&(chars=input.attr("class").match(new RegExp("min(\\d+)")))&&""!=input.val()&&input.val().length<chars[1]&&(l=new Array($cv.minlen.replace(/%s/,input.attr(o)).replace(/%d/,chars[1]),a)),input.hasClass("passwords")&&(n.push(a),2==n.length&&n[0].value!=n[1].value&&(l=new Array($cv.pwdmm,n[1]))),l[1]&&l[1].id==input.attr("id")&&(input.addClass("error"),label.addClass("error")))}),a.data("error",l).trigger("shopp_validate"),"undefined"!=e.shopp_validation&&a.data("error",e.shopp_validation),a.data("error")&&(l=a.data("error"),l[1]&&t("#"+l[1].id).length>0&&(t("#"+l[1].id).addClass("error"),t("label[for="+l[1].id+"]").addClass("error"))),l.length>0&&(l[1]instanceof jQuery&&l[1].focus(),t(e).hasClass("validation-alerts")&&alert(l[0]),i=!1),i}function validateForms(){jQuery("form.validate").on("submit.validate",function(e){return validate(this)})}jQuery(document).ready(function(e){validateForms(),catalogViewHandler(),slideshows(),carousels(),e.fn.colorbox&&(e("a.shopp-zoom").colorbox({photo:!0}),e("a.shopp-zoom.gallery").each(function(){var t=e(this).attr("class").match(/product\_(\d+)/)[1];"undefined"!=typeof cbo?e(this).attr("rel","gallery-"+t).colorbox(cbo):e(this).attr("rel","gallery-"+t).colorbox({slideshow:!0,slideshowSpeed:3500})})),e("select.shopp-orderby-menu").change(function(){this.form.submit()}),e("select.shopp-categories-menu").change(function(){document.location.href=e(this).val()}),$s.nocache&&e(window).unload(function(){})});