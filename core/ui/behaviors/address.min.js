!function(e){jQuery.fn.upstate=function(){return"undefined"==typeof regions?e(this):(e(this).change(function(i,t){var s=e(this),a=s.attr("id").split("-")[0],n=s.val(),l=s.parents().find("#"+a+"-state"),r=s.parents().find("#"+a+"-state-menu"),d=l.val(),o='<option value=""></option>',c="";return 0==r.length||(r.hasClass("hidden")&&r.removeClass("hidden").hide(),void(regions[n]||t&&r.find("option").length>1?(l.setDisabled(!0).addClass("_important").hide(),regions[n]?(r.hasClass("selectized")?(c=r[0].selectize.getValue(),r[0].selectize.clearOptions(),e.each(regions[n],function(e,i){r[0].selectize.addOption({value:e,text:i})}),c||(c=d),r[0].selectize.setValue(c)):(e.each(regions[n],function(e,i){o+='<option value="'+e+'">'+i+"</option>"}),t||r.empty().append(o).setDisabled(!1).show().focus()),r.hasClass("auto-required")&&r.addClass("required")):r.hasClass("auto-required")&&r.removeClass("required"),r.hasClass("selectized")?r[0].selectize.enable():(r.setDisabled(!1).show(),e("label[for="+l.attr("id")+"]").attr("for",r.attr("id")))):(r.hasClass("selectized")?(r[0].selectize.clearOptions(),r[0].selectize.addOption({value:l.val(),text:l.val()}),r[0].selectize.setValue(l.val())):(r.empty().setDisabled(!0).hide(),l.setDisabled(!1).show().removeClass("_important")),e("label[for="+r.attr("id")+"]").attr("for",l.attr("id")),t||l.val("").focus())))}).trigger("change",[!0]),e(this))}}(jQuery),jQuery(document).ready(function(e){var i=e(".sameaddress"),t=e("#shipping-address-fields"),s=e("#billing-address-fields");e("#firstname,#lastname").change(function(){var i="firstname"==e(this).attr("id")?"lastname":"firstname";e("#"+i).val().trim()&&e(this).val().trim()&&e("#billing-name,#shipping-name").filter(function(){return""===this.value}).val(new String(e("#firstname").val()+" "+e("#lastname").val()).trim())}),e("#billing-country,#shipping-country").upstate(),i.change(function(a,n){var l=!1,r=e("#billing-country"),d=e("#shipping-country"),o="billing"==i.val()?t:s,c="shipping"==i.val()?t:s;i.is(":checked")?(o.removeClass("half"),c.hide().find(".required").setDisabled(!0)):(o.addClass("half"),c.show().find(".disabled:not(._important)").setDisabled(!1),n||(l=!0)),r.is(":visible")&&r.trigger("change.localemenu",[n]),d.is(":visible")&&d.trigger("change.localemenu",[n]),l&&c.find("input:first").focus()}).trigger("change",[!0]).click(function(){e(this).change()})});