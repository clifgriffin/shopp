jQuery(document).ready(function(){var t=jQuery;t.fn.dragrow=function(n){var r=t(this),e=r.find("tbody > tr"),a="undefined"!=typeof t(document).attr("onselectstart"),o={onDrop:function(){}},n=t.extend(o,n);return e.bind("mousedown.dragrow",function(r){var e=t(this).fadeTo("fast",.4);return lastY=r.pageY,t("tr",e.parent()).not(e).bind("mouseenter.dragrow",function(){var n=t(this);r.pageY>lastY?n.after(e):n.before(e),lastY=r.pageY}),t("body").bind("mouseup.dragrow",function(){e.fadeTo("fast",1),t("tr",e.parent()).unbind("mouseenter.dragrow"),t("body").unbind("mouseup.dragrow"),a&&t(document).unbind("selectstart"),n.onDrop(e)}),r.preventDefault(),a&&t(document).bind("selectstart",function(){return!1}),!1}).css("cursor","move")},t.fn.arrangeRows=function(n){function r(){var n=t("#category-id"),r=e.find("th.column-name .shoppui-spinner");e.find("tbody tr input[name^=position]").each(function(r,e){var a=t(e),o=r+1;""!=a.attr("alt")&&o!=a.attr("alt")||"0"==a.val()?(a.val(o).attr("alt",o),n=n.add(a)):""==a.attr("alt")?a.val(o).attr("alt",o):a.val(o)}),1!=n.size()&&(r.hide().show(),t.ajax({url:updates_url+"&action=shopp_category_products_order",timeout:5e3,type:"POST",datatype:"text",data:n.serialize(),success:function(t){r.hide()},error:function(t,n){r.hide()}}))}var e=t(this);e.dragrow({onDrop:r}),r(),e.find("button[name=top]").hover(function(){t(this).toggleClass("hover")}).click(function(){var n=t(this).parent().parent(),e=n.find("input[name^=position]");return 0!=e.val()&&(n.insertBefore(n.parent().find("tr:first")),void r())}),e.find("button[name=bottom]").hover(function(){t(this).toggleClass("hover")}).click(function(){var n=t(this).parent().parent();n.find("input[name^=position]");n.insertAfter(n.parent().find("tr:last")),r()})},t("#arrange-products").arrangeRows()});